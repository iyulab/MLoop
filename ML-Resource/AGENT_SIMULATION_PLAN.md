# ML-Resource 001~025 Agent Simulation Plan

## 핵심 목적

> **MLoop + LLM Agent를 통한 "인간 개입 최소화" 자율 MLOps 기능 구현**

이 시뮬레이션의 목적은 **개별 모델의 성능(R², Accuracy)이 아닙니다.**

### 검증 대상
```
CSV 파일 → [LLM Agent 자율 분석] → [자동 전처리] → [AutoML 학습] → 모델
           ↑                        ↑                ↑
           어디서 인간 개입이 필요한가?
           그 갭을 줄이기 위해 무엇이 필요한가?
```

### 성공 기준
- **인간 개입 횟수 최소화**: 데이터셋 당 수동 조작 0~1회 목표
- **자율성 측정**: Agent가 스스로 결정한 비율 추적
- **실패 지점 식별**: 인간 개입이 불가피한 케이스 문서화

---

## 자율성 레벨 정의

| Level | 설명 | 인간 역할 | 목표 |
|-------|------|----------|------|
| **L0** | 완전 수동 | 모든 단계 지시 | - |
| **L1** | 단계별 승인 | 각 단계 승인 | 현재 |
| **L2** | 계획 승인 | 전체 계획만 승인 | **단기 목표** |
| **L3** | 결과 확인 | 최종 결과만 확인 | 중기 목표 |
| **L4** | 완전 자율 | 이상 시에만 개입 | 장기 목표 |

---

## 시뮬레이션 프레임워크

### 각 데이터셋별 측정 항목

```yaml
dataset_simulation:
  id: "005"
  name: "열처리 공급망최적화"

  # 자율성 측정
  autonomy_metrics:
    human_interventions: 0      # 인간 개입 횟수
    agent_decisions: 0          # Agent 자율 결정 횟수
    autonomy_ratio: 0%          # 자율성 비율
    achieved_level: L1          # 달성 레벨

  # 실패 지점 (인간 개입이 필요했던 곳)
  failure_points:
    - step: "데이터 로딩"
      reason: "인코딩 자동 감지 실패"
      required_action: "수동으로 encoding=cp949 지정"
      improvement_needed: "FilePrepper 인코딩 자동 감지"

  # 성공 지점 (Agent가 자율 처리한 곳)
  success_points:
    - step: "컬럼 타입 추론"
      agent_decision: "CRET_TIME을 DateTime으로 인식"

  # 개선 아이디어
  improvements:
    mloop: []
    fileprepper: []
    ironbees: []
    memoryindexer: []
```

---

## Phase 1: 자율 데이터 분석 (005-009)

### 검증 질문
1. **Agent가 CSV를 받고 스스로 분석할 수 있는가?**
2. **Label 컬럼을 자동 추천할 수 있는가?**
3. **전처리 필요 사항을 자동 식별하는가?**

### 시나리오: "CSV 파일만 주고 모델 빌드해줘"

```
입력: "D:/data/MLoop/ML-Resource/005-열처리 공급망최적화/Dataset/*.csv"
기대: Agent가 자율적으로
  1. 파일 구조 파악
  2. 테이블 관계 추론
  3. Label 컬럼 추천
  4. 전처리 계획 수립
  5. mloop.yaml 생성
  6. 학습 실행

측정: 이 중 몇 단계를 인간 개입 없이 완료하는가?
```

### 데이터셋별 복잡도

| ID | CSV 수 | 예상 난이도 | 자율성 테스트 포인트 |
|----|--------|------------|---------------------|
| 005 | 3 | Low | Multi-CSV 관계 추론 |
| 006 | 4 | Low | 조인 키 자동 식별 |
| 007 | 7 | Medium | 대량 파일 처리 전략 |
| 008 | 1 | **Baseline** | 단일 파일 완전 자율 |
| 009 | 1 | **Baseline** | 단일 파일 완전 자율 |

**008/009가 L3 이상 달성 못하면 기본 기능에 문제 있음**

---

## Phase 2: 자율 전처리 (010-013)

### 검증 질문
1. **복잡한 데이터 구조를 자동 이해하는가?**
2. **전처리 스크립트를 자동 생성하는가?**
3. **오류 발생 시 스스로 복구하는가?**

### 시나리오: "38개 CSV로 모델 만들어줘"

```
입력: "010-공정운영 최적화" (38 CSV files)
기대 자율 처리:
  1. 파일 분류 (마스터/트랜잭션/참조)
  2. 조인 순서 결정
  3. 중복/결측 처리
  4. 특성 엔지니어링
  5. 차원 축소 결정

실패 시 개선 대상:
  - FilePrepper: 자동 스키마 매칭
  - Ironbees: 복잡한 계획 수립 프롬프트
  - MLoop: 다중 파일 입력 지원
```

---

## Phase 3: 자율 모델 선택 (014-022)

### 검증 질문
1. **Regression vs Classification 자동 판단하는가?**
2. **불균형 데이터 자동 처리하는가?**
3. **적절한 평가 메트릭 선택하는가?**

### 시나리오: "이상 탐지 모델 만들어줘"

```
입력: "014-장비이상 조기탐지" (34 CSV, 시계열)
기대 자율 처리:
  1. 이상 탐지 = Classification 판단
  2. 시계열 특성 추출 필요성 인식
  3. 불균형 데이터 처리 전략
  4. 적절한 메트릭 (Precision/Recall) 선택

측정: Classification 시나리오에서 자율성 레벨
```

---

## Phase 4: Vision 한계 확인 (023-025)

### 검증 질문
1. **ML.NET 한계를 Agent가 인식하는가?**
2. **대안을 제시하는가?**
3. **적절히 "불가능"을 판단하는가?**

### 시나리오: "OCR 모델 만들어줘"

```
입력: "023-OCR" (27,281 images)
기대:
  - Agent가 ML.NET AutoML의 한계 인식
  - "이 작업은 MLoop로 적합하지 않습니다" 응답
  - 대안 제시 (Azure AI, Tesseract 등)

측정: 적절한 판단력 (무리하게 시도 vs 명확한 한계 인식)
```

---

## 개선점 도출 매트릭스

### 자율성 갭 → 라이브러리 개선

| 자율성 실패 지점 | MLoop | FilePrepper | Ironbees | MemoryIndexer |
|-----------------|-------|-------------|----------|---------------|
| 파일 인코딩 감지 | | ★ | | |
| Multi-CSV 관계 추론 | | ★ | ★ | |
| Label 컬럼 추천 | ★ | | ★ | |
| 전처리 스크립트 생성 | | ★ | ★ | |
| 오류 자동 복구 | ★ | ★ | ★ | |
| 과거 패턴 참조 | | | | ★ |
| 유사 데이터셋 검색 | | | | ★ |
| Task 타입 자동 판단 | ★ | | ★ | |
| 도메인 지식 적용 | | | ★ | ★ |

---

## 실행 방식

### 각 데이터셋 시뮬레이션 절차

```
1. 최소 입력으로 시작
   "D:/path/to/Dataset 폴더로 모델 만들어줘"

2. Agent 자율 시도 관찰
   - 무엇을 스스로 결정하는가
   - 어디서 막히는가
   - 어떤 질문을 하는가

3. 인간 개입 기록
   - 개입 사유
   - 어떤 정보/기능이 있었으면 불필요했을 개입인가

4. 개선점 도출
   - 해당 갭을 메우기 위한 구체적 기능 정의

5. 자율성 점수 기록
   - interventions / total_decisions = autonomy_ratio
```

### 결과물

각 데이터셋 완료 후:
```
ML-Resource/{NNN-프로젝트}/
├── autonomy-report.md      # 자율성 측정 결과
├── failure-points.md       # 실패 지점 분석
└── improvements.md         # 개선 아이디어
```

---

## 최종 목표

### 단기 (이번 시뮬레이션)
- 21개 Tabular 데이터셋 자율성 측정 완료
- 데이터셋별 평균 자율성 레벨 **L2** 달성
- 라이브러리별 Top 3 개선 이슈 도출

### 중기 (후속 개발)
- 도출된 개선점 구현
- 자율성 레벨 **L3** 달성
- "폴더 경로만 주면 모델 완성" 시나리오 실현

### 장기
- **L4**: 완전 자율 MLOps
- 인간은 "학습해" 한마디 + 결과 확인만

---

## 다음 단계

**005-열처리 공급망최적화**로 첫 시뮬레이션 시작

```
입력: "D:/data/MLoop/ML-Resource/005-열처리 공급망최적화/Dataset 으로 모델 만들어줘"
관찰: Agent가 어디까지 자율 처리하는가
```

---

**Created**: 2026-01-11
**Purpose**: MLoop 자율 MLOps 기능 검증 및 개선점 도출
